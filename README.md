# نظام إدارة الموارد البشرية (HRMS) - نظرة عامة على المشروع

أهلاً بك في وثائق مشروع نظام إدارة الموارد البشرية (HRMS). هذا المستند يهدف إلى شرح كيفية بناء النظام، وكيفية ترابط أجزائه المختلفة، وتدفق البيانات داخله.

## 1. هيكل المشروع (Project Structure)

تم بناء المشروع باستخدام Next.js App Router، وهذا هو الهيكل الأساسي للمجلدات:

-   **/src/app/(dashboard)/**: يحتوي على جميع صفحات النظام التي تتطلب تخطيط لوحة التحكم (مثل الشريط الجانبي والرأس).
    -   **/employees**: صفحة إدارة الموظفين.
    -   **/departments**: صفحة إدارة الأقسام والمسميات الوظيفية.
    -   **/attendance**: صفحة سجلات الحضور والانصراف.
    -   **/leaves**: صفحة إدارة الإجازات.
    -   **/payroll**: صفحة إدارة الرواتب.
    -   **/performance**: صفحة تقييمات الأداء.
    -   **/recruitment**: صفحة التوظيف ومتابعة المتقدمين.
    -   **/settings**: صفحة إعدادات النظام (مثل جهاز البصمة).
    -   **layout.tsx**: التخطيط الرئيسي للوحة التحكم الذي يحتوي على الشريط الجانبي والرأس.
    -   **page.tsx**: الصفحة الرئيسية للوحة التحكم (Dashboard).

-   **/src/app/api/**: يحتوي على مسارات الواجهة الخلفية (API Routes) التي تتعامل مع منطق الخادم.
    -   **/attendance/sync/route.ts**: الواجهة الخلفية المسؤولة عن الاتصال بجهاز البصمة ومزامنة البيانات.

-   **/src/components/**: يحتوي على مكونات React القابلة لإعادة الاستخدام.
    -   **/ui/**: مكونات واجهة المستخدم الأساسية من [ShadCN](https://ui.shadcn.com/) (مثل Button, Card, Table).
    -   **/dashboard/**: مكونات مخصصة للوحة التحكم (مثل Header, Nav).

-   **/src/lib/**: يحتوي على الشيفرات المساعدة والبيانات.
    -   **data.ts**: ملف رئيسي يحتوي على **البيانات الوهمية (Mock Data)** التي يستخدمها التطبيق حاليًا بدلاً من قاعدة بيانات حقيقية. جميع الجداول (الموظفين، الأقسام، الإجازات) محاكاة هنا.
    -   **types.ts**: تعريف أنواع البيانات (TypeScript Types) المستخدمة في جميع أنحاء المشروع.
    -   **zkt-service.ts**: الخدمة المسؤولة عن منطق الاتصال بجهاز البصمة (ZKTeco).

## 2. تدفق البيانات (Data Flow)

حالياً، لا يوجد اتصال بقاعدة بيانات حقيقية (مثل SQLite). بدلاً من ذلك، يعمل النظام كالتالي:

1.  **مصدر البيانات**: جميع البيانات تأتي من ملف `src/lib/data.ts`. هذا الملف يصدر مصفوفات (arrays) تحتوي على كائنات (objects) تحاكي سجلات قاعدة البيانات.
2.  **عرض البيانات**: صفحات التطبيق (الموجودة في `/src/app/(dashboard)`) تقوم باستيراد هذه البيانات مباشرة من `data.ts` وتعرضها في جداول ومكونات.
3.  **تعديل البيانات (محاكاة)**: عند ملء نماذج (Forms) مثل "إضافة موظف" أو "إضافة قسم"، فإن البيانات المدخلة تُطبع في وحدة التحكم (console) أو تُعرض كـ Toast. **لا يتم حفظها بشكل دائم** لأننا لا نستخدم قاعدة بيانات بعد.

## 3. ربط جهاز البصمة (ZKTeco Integration)

يتميز النظام بقدرته على الاتصال بأجهزة الحضور والانصراف من نوع ZKTeco.

1.  **الإعدادات**: في صفحة **الإعدادات (`/settings`)**، يقوم المستخدم بإدخال عنوان IP الخاص بالجهاز، اسم المستخدم، وكلمة المرور. يتم حفظ هذه الإعدادات في **التخزين المحلي للمتصفح (localStorage)**.
2.  **المزامنة**: في صفحة **الحضور (`/attendance`)**، عند الضغط على زر "مزامنة"، تقوم الصفحة بقراءة الإعدادات من `localStorage` وإرسالها إلى API Route في `/api/attendance/sync`.
3.  **المنطق الخلفي**: يقوم `sync/route.ts` باستخدام `zkt-service.ts` ومكتبة `node-zklib` للاتصال بالجهاز، سحب سجلات الحضور، وإعادتها إلى الواجهة الأمامية.
4.  **عرض النتائج**: يتم عرض رسالة نجاح أو فشل للمستخدم. في حالة الفشل (أو للعرض التوضيحي)، يتم عرض بيانات محاكاة من الخدمة نفسها.

## 4. تصميم الواجهة (UI Design)

-   **المكتبة المستخدمة**: يعتمد التصميم بشكل أساسي على [ShadCN/UI](https://ui.shadcn.com/)، وهي مجموعة من مكونات React الجميلة والقابلة للتخصيص مبنية على Tailwind CSS.
-   **التخطيط**: يتم استخدام تخطيط موحد (`(dashboard)/layout.tsx`) يوفر شريط تنقل جانبي ورأس (Header) لجميع الصفحات الداخلية، مما يضمن تجربة مستخدم متسقة.
-   **اللغة والتوجيه**: تم تصميم التطبيق بالكامل لدعم **اللغة العربية والتوجيه من اليمين إلى اليسار (RTL)**.

## 5. الخلاصة

هذا النظام هو تطبيق Next.js متكامل لإدارة الموارد البشرية، مع واجهة مستخدم حديثة ومنطق واضح. على الرغم من أنه يعتمد حاليًا على بيانات وهمية، إلا أنه مهيأ بالكامل للاتصال بقاعدة بيانات حقيقية وتوسيع وظائفه. التكامل مع جهاز البصمة يمثل ميزة قوية تظهر كيفية تفاعل الواجهة الأمامية مع الواجهة الخلفية والأجهزة الخارجية.
